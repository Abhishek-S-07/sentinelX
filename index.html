<!DOCTYPE html>
<html>
<head>
<title>SentinelX Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
body {
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background: linear-gradient(-45deg,#0f2027,#203a43,#2c5364,#1c1c1c);
    background-size:400% 400%;
    animation: gradient 12s ease infinite;
    color:white;
}

@keyframes gradient {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}

.container {
    max-width:1000px;
    margin:auto;
    padding:20px;
}

.card {
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(12px);
    padding:20px;
    border-radius:15px;
    margin-bottom:20px;
    box-shadow:0 0 20px rgba(0,0,0,0.6);
}

input, select {
    width:100%;
    padding:10px;
    margin:8px 0;
    border:none;
    border-radius:8px;
}

button {
    padding:12px;
    border:none;
    border-radius:8px;
    margin:8px 0;
    background:crimson;
    color:white;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
}

button:hover {
    transform:scale(1.05);
    background:#ff1744;
}

#map {
    height:400px;
    border-radius:15px;
    margin-top:10px;
}

.badge {
    padding:6px 12px;
    border-radius:20px;
    font-size:14px;
    font-weight:bold;
}

.low { background:green; }
.medium { background:orange; }
.high { background:red; }
</style>
</head>

<body>

<div class="container">

<h2>ðŸš¨ SentinelX Pro - Live Tracking</h2>

<div class="card">
<h3>Student Registration</h3>

<input id="name" placeholder="Name">
<select id="blood">
<option value="">Blood Group</option>
<option>A+</option><option>A-</option>
<option>B+</option><option>B-</option>
<option>AB+</option><option>AB-</option>
<option>O+</option><option>O-</option>
</select>

<input id="contact1" placeholder="Contact 1">
<input id="contact2" placeholder="Contact 2">

<button onclick="register()">Register</button>
<button onclick="startTracking()">Start Live Tracking</button>
<button onclick="triggerEmergency()">Trigger Emergency</button>
</div>

<div class="card">
<h3>ðŸ“¡ Live Campus Monitoring</h3>
<div id="map"></div>
<div id="severityDisplay"></div>
</div>

</div>

<script>

let map;
let marker;
let watchId;
let currentSeverity="LOW";

function register(){
    const user={
        name:name.value,
        blood:blood.value,
        contacts:[contact1.value,contact2.value].filter(Boolean)
    };
    localStorage.setItem("user",JSON.stringify(user));
    alert("Registered Successfully");
}

function initMap(lat,lon){
    map=L.map('map').setView([lat,lon],16);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
        attribution:'Â© OpenStreetMap'
    }).addTo(map);

    marker=L.marker([lat,lon]).addTo(map)
        .bindPopup("Live Location")
        .openPopup();
}

function startTracking(){

    if(!navigator.geolocation){
        alert("Geolocation not supported");
        return;
    }

    watchId=navigator.geolocation.watchPosition(pos=>{

        const lat=pos.coords.latitude;
        const lon=pos.coords.longitude;

        if(!map){
            initMap(lat,lon);
        }else{
            marker.setLatLng([lat,lon]);
            map.setView([lat,lon]);
        }

    },error=>{
        alert("Location permission required");
    },{
        enableHighAccuracy:true,
        maximumAge:0,
        timeout:5000
    });

}

function triggerEmergency(){

    const randomForce=Math.random()*70;

    if(randomForce>50) currentSeverity="HIGH";
    else if(randomForce>35) currentSeverity="MEDIUM";
    else currentSeverity="LOW";

    const severityHTML=`
        <h3>ðŸš¨ Emergency Status</h3>
        <span class="badge ${currentSeverity.toLowerCase()}">
        ${currentSeverity} SEVERITY
        </span>
    `;

    document.getElementById("severityDisplay").innerHTML=severityHTML;

    alert("Emergency Triggered: "+currentSeverity);

}

</script>

</body>
</html>